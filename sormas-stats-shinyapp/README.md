# sormas-stats-shinyapp
sormas-stats-shinyapp is a web app based on R Shiny framework. It contains modules to analyze data generated by SORMAS or any other electronic tool used for disease surveillance or outbreak management. 

## sormas-stats-app folder
- `server.R`
- `ui.R`
- `global.R`
- `etc`

## Install softwares
Make sure git and docker is installed.
```bash
sudo -s
apt install git docker docker-compose
```
## Download the repo
```bash
git clone git@github.com:hzi-braunschweig/SORMAS-Stats-next-gen.git
cd SORMAS-Stats-next-gen
```
## Run shinyapp in docker mode
Before running the image, make sure that sormas-postgres is up and running and the global.R file has the right configuration for the postgress user account. When the container start, the global.R file is first executed before the app in launched.
```bash
cd sormas-stats-shinyapp
docker build --no-cache -t sormas-stats-image .
```
Run the container and map to port 3839
```bash
sudo docker run  -d --network=host --rm -p 3839:3839 sormas-stats-image 
```
When running the app in detach mode `-d`, you need to refresh the page (http://0.0.0.0:3839/) and wait for the app to load. The duration depends on the amount of data that the app need to export from sormas. Running app with option `--network=host`  may result in a warning message `WARNING: Published ports are discarded when using host network mode`, just ignore it. `--network=host` is needed to specify the network where the app can find the sormas-postgres db.
You can also download the image from dockerhub by searching for `sormas-stats`, thus saving the time wasted in building the image.

## Run app in non-docker mode
Make sure R and RStudio softwares are installed and sormas-postgres is up and running.

Open the folder `sormas-stats-app` and lauch the project `example-app.Rproj` in RStudio.

Open the file `Launch_app.R`, set the configuration for the postgres user account in the `global.R` file and run the each line in this file.

Check the link suggested in your console, something like `Listening on http://127.0.0.1:7605`





